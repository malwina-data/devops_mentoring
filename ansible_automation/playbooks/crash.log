2024/09/14 09:17:49 [INFO] Packer version: 1.11.2 [go1.21.12 darwin arm64]
2024/09/14 09:17:49 [INFO] PACKER_CONFIG env var not set; checking the default config file path
2024/09/14 09:17:49 [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/malwinka/.packerconfig
2024/09/14 09:17:49 [WARN] Config file doesn't exist: /Users/malwinka/.packerconfig
2024/09/14 09:17:49 [INFO] Setting cache directory: /Users/malwinka/.cache/packer
2024/09/14 09:17:49 [TRACE] listing potential installations for "github.com/hashicorp/amazon" that match "~> 1". plugingetter.ListInstallationsOptions{PluginDirectory:"/Users/malwinka/.config/packer/plugins", BinaryInstallationOptions:plugingetter.BinaryInstallationOptions{APIVersionMajor:"5", APIVersionMinor:"0", OS:"darwin", ARCH:"arm64", Ext:"", Checksummers:[]plugingetter.Checksummer{plugingetter.Checksummer{Type:"sha256", Hash:(*sha256.digest)(0x1400085c280)}}, ReleasesOnly:false}}
2024/09/14 09:17:49 [TRACE] Found the following "github.com/hashicorp/amazon" installations: [{/Users/malwinka/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 v1.3.2 x5.0}]
2024/09/14 09:17:49 [INFO] found external [chroot ebs ebssurrogate ebsvolume instance] builders from amazon plugin
2024/09/14 09:17:49 [INFO] found external [import] post-processors from amazon plugin
2024/09/14 09:17:49 found external [ami parameterstore secretsmanager] datasource from amazon plugin
2024/09/14 09:17:49 [TRACE] listing potential installations for <nil> that match "". plugingetter.ListInstallationsOptions{PluginDirectory:"/Users/malwinka/.config/packer/plugins", BinaryInstallationOptions:plugingetter.BinaryInstallationOptions{APIVersionMajor:"5", APIVersionMinor:"0", OS:"darwin", ARCH:"arm64", Ext:"", Checksummers:[]plugingetter.Checksummer{plugingetter.Checksummer{Type:"sha256", Hash:(*sha256.digest)(0x1400079ae00)}}, ReleasesOnly:false}}
2024/09/14 09:17:49 [INFO] found external [chroot ebs ebssurrogate ebsvolume instance] builders from amazon plugin
2024/09/14 09:17:49 [INFO] found external [import] post-processors from amazon plugin
2024/09/14 09:17:49 found external [ami parameterstore secretsmanager] datasource from amazon plugin
2024/09/14 09:17:49 [TRACE] validateValue: not active for aws_access_key, so skipping
2024/09/14 09:17:49 [TRACE] validateValue: not active for aws_secret_key, so skipping
2024/09/14 09:17:49 [TRACE] validateValue: not active for region, so skipping
2024/09/14 09:17:49 [INFO] Starting external plugin /Users/malwinka/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 start builder ebs
2024/09/14 09:17:49 Starting plugin: /Users/malwinka/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 []string{"/Users/malwinka/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64", "start", "builder", "ebs"}
2024/09/14 09:17:49 Waiting for RPC address for: /Users/malwinka/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64
2024/09/14 09:17:49 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 2024/09/14 09:17:49 Plugin address: unix /var/folders/4n/m5bbtyqx6v1cbb4f78qsd8400000gn/T/packer-plugin3073685552
2024/09/14 09:17:49 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 2024/09/14 09:17:49 Waiting for connection...
2024/09/14 09:17:49 Received unix RPC address for /Users/malwinka/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64: addr is /var/folders/4n/m5bbtyqx6v1cbb4f78qsd8400000gn/T/packer-plugin3073685552
2024/09/14 09:17:49 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 2024/09/14 09:17:49 Serving a plugin connection...
2024/09/14 09:17:49 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 2024/09/14 09:17:49 [TRACE] starting builder ebs
2024/09/14 09:17:49 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 2024/09/14 09:17:49 [INFO] (aws): No AWS timeout and polling overrides have been set. Packer will default to waiter-specific delays and timeouts. If you would like to customize the length of time between retries and max number of retries you may do so by setting the environment variables AWS_POLL_DELAY_SECONDS and AWS_MAX_ATTEMPTS or the configuration options aws_polling_delay_seconds and aws_polling_max_attempts to your desired values.
2024/09/14 09:17:49 [INFO] Starting internal plugin packer-provisioner-shell
2024/09/14 09:17:49 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-provisioner-shell"}
2024/09/14 09:17:49 Waiting for RPC address for: /opt/homebrew/bin/packer
2024/09/14 09:17:49 packer-provisioner-shell plugin: [INFO] Packer version: 1.11.2 [go1.21.12 darwin arm64]
2024/09/14 09:17:49 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2024/09/14 09:17:49 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/malwinka/.packerconfig
2024/09/14 09:17:49 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /Users/malwinka/.packerconfig
2024/09/14 09:17:49 packer-provisioner-shell plugin: [INFO] Setting cache directory: /Users/malwinka/.cache/packer
2024/09/14 09:17:49 packer-provisioner-shell plugin: args: []string{"packer-provisioner-shell"}
2024/09/14 09:17:49 packer-provisioner-shell plugin: Plugin address: unix /var/folders/4n/m5bbtyqx6v1cbb4f78qsd8400000gn/T/packer-plugin1398788411
2024/09/14 09:17:49 packer-provisioner-shell plugin: Waiting for connection...
2024/09/14 09:17:49 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/4n/m5bbtyqx6v1cbb4f78qsd8400000gn/T/packer-plugin1398788411
2024/09/14 09:17:49 packer-provisioner-shell plugin: Serving a plugin connection...
2024/09/14 09:17:49 [INFO] Starting internal plugin packer-post-processor-shell-local
2024/09/14 09:17:49 Starting plugin: /opt/homebrew/bin/packer []string{"/opt/homebrew/bin/packer", "execute", "packer-post-processor-shell-local"}
2024/09/14 09:17:49 Waiting for RPC address for: /opt/homebrew/bin/packer
2024/09/14 09:17:49 packer-post-processor-shell-local plugin: [INFO] Packer version: 1.11.2 [go1.21.12 darwin arm64]
2024/09/14 09:17:49 packer-post-processor-shell-local plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2024/09/14 09:17:49 packer-post-processor-shell-local plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /Users/malwinka/.packerconfig
2024/09/14 09:17:49 packer-post-processor-shell-local plugin: [WARN] Config file doesn't exist: /Users/malwinka/.packerconfig
2024/09/14 09:17:49 packer-post-processor-shell-local plugin: [INFO] Setting cache directory: /Users/malwinka/.cache/packer
2024/09/14 09:17:49 packer-post-processor-shell-local plugin: args: []string{"packer-post-processor-shell-local"}
2024/09/14 09:17:49 Received unix RPC address for /opt/homebrew/bin/packer: addr is /var/folders/4n/m5bbtyqx6v1cbb4f78qsd8400000gn/T/packer-plugin3904435204
2024/09/14 09:17:49 packer-post-processor-shell-local plugin: Plugin address: unix /var/folders/4n/m5bbtyqx6v1cbb4f78qsd8400000gn/T/packer-plugin3904435204
2024/09/14 09:17:49 packer-post-processor-shell-local plugin: Waiting for connection...
2024/09/14 09:17:49 packer-post-processor-shell-local plugin: Serving a plugin connection...
2024/09/14 09:17:49 ui: [1;32mamazon-ebs.example: output will be in this color.[0m
2024/09/14 09:17:49 ui: 
2024/09/14 09:17:49 Build debug mode: false
2024/09/14 09:17:49 Force build: false
2024/09/14 09:17:49 On error: 
2024/09/14 09:17:49 Waiting on builds to complete...
2024/09/14 09:17:49 Starting build run: amazon-ebs.example
2024/09/14 09:17:49 Running builder: amazon-ebs
2024/09/14 09:17:49 [INFO] (telemetry) Starting builder amazon-ebs.example
2024/09/14 09:17:49 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 2024/09/14 09:17:49 [INFO] AWS Auth provider used: "StaticProvider"
2024/09/14 09:17:49 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 2024/09/14 09:17:49 Found region sa-east-1
2024/09/14 09:17:49 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 2024/09/14 09:17:49 [INFO] AWS Auth provider used: "StaticProvider"
2024/09/14 09:17:50 ui: [1;32m==> amazon-ebs.example: Prevalidating any provided VPC information[0m
2024/09/14 09:17:50 ui: [1;32m==> amazon-ebs.example: Prevalidating AMI Name: ami1[0m
2024/09/14 09:17:51 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 2024/09/14 09:17:51 Using AMI Filters {
2024/09/14 09:17:51 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin:   ImageIds: ["ami-04eeb630f180cea95"],
2024/09/14 09:17:51 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin:   IncludeDeprecated: false
2024/09/14 09:17:51 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: }
2024/09/14 09:17:52 ui: [0;32m    amazon-ebs.example: Found Image ID: ami-04eeb630f180cea95[0m
2024/09/14 09:17:52 ui: [1;32m==> amazon-ebs.example: Setting public IP address to true on instance without a subnet ID[0m
2024/09/14 09:17:52 ui: [1;32m==> amazon-ebs.example: No VPC ID provided, Packer will use the default VPC[0m
2024/09/14 09:17:53 ui: [1;32m==> amazon-ebs.example: Inferring subnet from the selected VPC "vpc-08f8171735058de64"[0m
2024/09/14 09:17:54 ui: [1;32m==> amazon-ebs.example: Failed to filter subnets/AZ for the requested machine type "t2.micro": no AZ match the requested machine type "t2.micro"[0m
2024/09/14 09:17:54 ui: [1;32m==> amazon-ebs.example: This may result in Packer picking a subnet/AZ that can't host the requested machine type[0m
2024/09/14 09:17:54 ui: [1;32m==> amazon-ebs.example: Please check that you have the permissions required to run DescribeInstanceTypeOfferings and try again.[0m
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: panic: runtime error: index out of range [-1]
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: goroutine 10 [running]:
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: github.com/hashicorp/packer-plugin-amazon/builder/common.mostFreeSubnet(...)
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 	github.com/hashicorp/packer-plugin-amazon/builder/common/step_network_info.go:56
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: github.com/hashicorp/packer-plugin-amazon/builder/common.(*StepNetworkInfo).GetDefaultVPCAndSubnet(0x14000597ad0, {0x1049f65b8, 0x140006ca060}, {0x104a9da50, 0x140006a8090}, {0x102e3fdf0?, 0x140004c4158?})
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 	github.com/hashicorp/packer-plugin-amazon/builder/common/step_network_info.go:250 +0x8e4
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: github.com/hashicorp/packer-plugin-amazon/builder/common.(*StepNetworkInfo).Run(0x14000597ad0, {0x103ec2289?, 0x1400009a820?}, {0x1049f3858, 0x140006ca600})
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 	github.com/hashicorp/packer-plugin-amazon/builder/common/step_network_info.go:156 +0xb68
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: github.com/hashicorp/packer-plugin-sdk/multistep.(*BasicRunner).Run(0x140006ca780, {0x1049f3970, 0x1400009a820}, {0x1049f3858, 0x140006ca600})
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 	github.com/hashicorp/packer-plugin-sdk@v0.5.2/multistep/basic_runner.go:73 +0x294
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: github.com/hashicorp/packer-plugin-amazon/builder/ebs.(*Builder).Run(0x1400027f500, {0x1049f3970, 0x1400009a820}, {0x1049f65b8?, 0x140006ca060}, {0x1049dbe60?, 0x1400007f260})
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 	github.com/hashicorp/packer-plugin-amazon/builder/ebs/builder.go:478 +0x2564
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: github.com/hashicorp/packer-plugin-sdk/rpc.(*BuilderServer).Run(0x140006a6040, 0x2eab6e8?, 0x1400000e480)
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 	github.com/hashicorp/packer-plugin-sdk@v0.5.2/rpc/builder.go:120 +0x1a0
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: reflect.Value.call({0x14000090840?, 0x140006a80c8?, 0x13?}, {0x103ebc519, 0x4}, {0x1400052bef8, 0x3, 0x3?})
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 	reflect/value.go:596 +0x994
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: reflect.Value.Call({0x14000090840?, 0x140006a80c8?, 0x0?}, {0x140001106f8?, 0x0?, 0x0?})
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 	reflect/value.go:380 +0x94
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: net/rpc.(*service).call(0x140006a6080, 0x0?, 0x0?, 0x1400069e060, 0x14000184300, 0x0?, {0x1044ad3a0?, 0x1400000e46c?, 0x0?}, {0x10445bb40?, ...}, ...)
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 	net/rpc/server.go:382 +0x204
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: created by net/rpc.(*Server).ServeCodec in goroutine 1
2024/09/14 09:17:54 packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64 plugin: 	net/rpc/server.go:479 +0x304
2024/09/14 09:17:54 [INFO] (telemetry) ending amazon-ebs.example
2024/09/14 09:17:54 ui error: [1;31mBuild 'amazon-ebs.example' errored after 5 seconds 194 milliseconds: unexpected EOF[0m
2024/09/14 09:17:54 ui: 
==> Wait completed after 5 seconds 194 milliseconds
2024/09/14 09:17:54 machine readable: error-count []string{"1"}
2024/09/14 09:17:54 ui error: 
==> Some builds didn't complete successfully and had errors:
2024/09/14 09:17:54 machine readable: amazon-ebs.example,error []string{"unexpected EOF"}
2024/09/14 09:17:54 ui error: --> amazon-ebs.example: unexpected EOF
2024/09/14 09:17:54 ui: 
==> Builds finished but no artifacts were created.
2024/09/14 09:17:54 /Users/malwinka/.config/packer/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v1.3.2_x5.0_darwin_arm64: plugin process exited
2024/09/14 09:17:54 [INFO] (telemetry) Finalizing.
2024/09/14 09:17:54 waiting for all plugin processes to complete...
2024/09/14 09:17:54 /opt/homebrew/bin/packer: plugin process exited
2024/09/14 09:17:54 /opt/homebrew/bin/packer: plugin process exited
